<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd" >

	<!-- Common beans used both by the MoM IME client and server -->
	
	<bean id="clientToServerJaxbContext" class="javax.xml.bind.JAXBContext" factory-method="newInstance">
		<constructor-arg>
    		<list>
    			<value>com.ndg.multiplayer.base.ClientToServerMessage</value>
    			<value>com.ndg.multiplayer.sessionbase.CreateAccount</value>
    			<value>com.ndg.multiplayer.sessionbase.Login</value>
    			<value>com.ndg.multiplayer.sessionbase.Logout</value>
    			<value>com.ndg.multiplayer.sessionbase.RequestSessionList</value>
    			<value>com.ndg.multiplayer.sessionbase.NewSession</value>
    			<value>com.ndg.multiplayer.sessionbase.JoinSession</value>
    			<value>com.ndg.multiplayer.sessionbase.LeaveSession</value>

    			<!-- MoM multiplayer structures -->
    			<value>momime.common.messages.v0_9_5.MomSessionDescription</value>

				<!-- MoM multiplayer messages -->
    			<value>momime.common.messages.clienttoserver.v0_9_5.AlchemyMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.AttackNodeLairTowerMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.CancelPendingMovementAndSpecialOrdersMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.CancelTargetSpellMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.CaptureCityDecisionMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.ChangeCityConstructionMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.ChangeOptionalFarmersMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.ChangeTaxRateMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.ChatMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.ChooseCityNameMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.ChooseCustomFlagColourMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.ChooseCustomPicksMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.ChooseInitialSpellsMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.ChooseRaceMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.ChooseStandardPhotoMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.ChooseWizardMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.ChoseNotToDoScheduledCombatMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.CombatAutoControlMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.DismissUnitMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.EndCombatTurnMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.NextTurnButtonMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.RequestCastSpellMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.RequestMoveCombatUnitMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.RequestMoveOverlandUnitStackMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.RequestOverlandMovementDistancesMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.RequestResearchSpellMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.RequestStartScheduledCombatMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.RequestSwitchOffMaintainedSpellMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.RequestUpdateUnitNameMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.RushBuyMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.SellBuildingMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.SpecialOrderButtonMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.TargetSpellMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.UnrequestStartScheduledCombatMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.UpdateMagicPowerDistributionMessage</value>
    			<value>momime.common.messages.clienttoserver.v0_9_5.UploadCustomPhotoMessage</value>
    		</list>
   		</constructor-arg>
	</bean>

	<bean id="serverToClientJaxbContext" class="javax.xml.bind.JAXBContext" factory-method="newInstance">
		<constructor-arg>
    		<list>
    			<value>com.ndg.multiplayer.base.ServerToClientMessage</value>
    			<value>com.ndg.multiplayer.sessionbase.CreateAccountSuccessful</value>
    			<value>com.ndg.multiplayer.sessionbase.CreateAccountFailed</value>
    			<value>com.ndg.multiplayer.sessionbase.LoginSuccessful</value>
    			<value>com.ndg.multiplayer.sessionbase.LoginFailed</value>
    			<value>com.ndg.multiplayer.sessionbase.LogoutSuccessful</value>
    			<value>com.ndg.multiplayer.sessionbase.LogoutFailed</value>
    			<value>com.ndg.multiplayer.sessionbase.RequestSessionListSuccessful</value>
    			<value>com.ndg.multiplayer.sessionbase.RequestSessionListFailed</value>
    			<value>com.ndg.multiplayer.sessionbase.JoinSuccessful</value>
    			<value>com.ndg.multiplayer.sessionbase.JoinFailed</value>
    			<value>com.ndg.multiplayer.sessionbase.PlayerLeft</value>
    			<value>com.ndg.multiplayer.sessionbase.AdditionalPlayerJoined</value>
    			<value>com.ndg.multiplayer.sessionbase.SessionEnding</value>
    			<value>com.ndg.multiplayer.sessionbase.KickedByAnotherLogin</value>
    			<value>com.ndg.multiplayer.sessionbase.LeaveSessionFailed</value>
    			
    			<!-- MoM multiplayer structures -->
    			<value>momime.common.messages.v0_9_5.MomSessionDescription</value>
    			<value>momime.common.messages.v0_9_5.MomGeneralPublicKnowledge</value>
    			<value>momime.common.messages.v0_9_5.MomPersistentPlayerPrivateKnowledge</value>
    			<value>momime.common.messages.v0_9_5.MomPersistentPlayerPublicKnowledge</value>
    			<value>momime.common.messages.v0_9_5.MomTransientPlayerPrivateKnowledge</value>
    			<value>momime.common.messages.v0_9_5.MomTransientPlayerPublicKnowledge</value>

				<!-- MoM multiplayer messages -->
    			<value>momime.common.messages.servertoclient.v0_9_5.AddNewTurnMessagesMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.AddScheduledCombatMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.ApplyDamageMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.AskForCaptureCityDecisionMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.BroadcastChatMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.ChooseInitialSpellsNowMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.ChooseYourRaceNowMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.ChosenCustomPhotoMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.ChosenStandardPhotoMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.ChosenWizardMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.CombatEndedMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.DamageCalculationMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.EndOfContinuedMovementMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.ErasePendingMovementsMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.FoundLairNodeTowerMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.FullSpellListMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.MoveUnitInCombatMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.MoveUnitStackOverlandMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.NewGameDatabaseMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.OnePlayerSimultaneousTurnDoneMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.OverlandCastQueuedMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.OverlandMovementTypesMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.PendingMovementMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.PendingSaleMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.PlayerCombatRequestStatusMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.RemoveQueuedSpellMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.ReplacePicksMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.ScheduledCombatWalkInWithoutAFightMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.SelectNextUnitToMoveOverlandMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.SetCombatPlayerMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.SetCurrentPlayerMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.SetSpecialOrderMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.SetUnitIntoOrTakeUnitOutOfCombatMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.ShowListAndOtherScheduledCombatsMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.SpellResearchChangedMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.StartCombatMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.StartGameMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.StartGameProgressMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.StartSimultaneousTurnMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.TaxRateChangedMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.TextPopupMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.UpdateGlobalEconomyMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.UpdateManaSpentOnCastingCurrentSpellMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.UpdateOtherScheduledCombatsMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.UpdateOverlandMovementRemainingMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.UpdateProductionSoFarMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.UpdateRemainingResearchCostMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.YourPhotoIsOkMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.YourRaceIsOkMessage</value>

				<!-- FoW messages -->
    			<value>momime.common.messages.servertoclient.v0_9_5.UpdateTerrainMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.UpdateCityMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.AddBuildingMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.DestroyBuildingMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.AddUnitMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.KillUnitMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.UpdateNodeLairTowerUnitIDMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.AddMaintainedSpellMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.SwitchOffMaintainedSpellMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.AddCombatAreaEffectMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.CancelCombatAreaEffectMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.FogOfWarVisibleAreaChangedMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.UpdateDamageTakenAndExperienceMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.UpdateUnitNameMessage</value>
    			<value>momime.common.messages.servertoclient.v0_9_5.UpdateUnitToAliveMessage</value>
    		</list>
   		</constructor-arg>
	</bean>

	<bean id="objectFactoryMap" class="com.ndg.map.coordinates.ObjectFactoryMap" />	<!-- Creates Ex versions of coordinates -->

	<bean id="cityCalculations" class="momime.common.calculations.MomCityCalculationsImpl">
		<property name="memoryBuildingUtils" ref="memoryBuildingUtils" />
		<property name="playerPickUtils" ref="playerPickUtils" />
		<property name="coordinateSystemUtils" ref="coordinateSystemUtils" />
		<property name="multiplayerSessionUtils" ref="multiplayerSessionUtils" />
	</bean>
	
	<bean id="skillCalculations" class="momime.common.calculations.MomSkillCalculationsImpl" />
	
	<bean id="spellCalculations" class="momime.common.calculations.MomSpellCalculationsImpl">
		<property name="spellUtils" ref="spellUtils" />
		<property name="memoryBuildingUtils" ref="memoryBuildingUtils" />
		<property name="playerPickUtils" ref="playerPickUtils" />
		<property name="coordinateSystemUtils" ref="coordinateSystemUtils" />
	</bean>
	
	<bean id="unitCalculations" class="momime.common.calculations.MomUnitCalculationsImpl">
		<property name="playerPickUtils" ref="playerPickUtils" />
		<property name="combatMapUtils" ref="combatMapUtils" />
		<property name="unitUtils" ref="unitUtils" />
		<property name="coordinateSystemUtils" ref="coordinateSystemUtils" />
	</bean>

	<bean id="memoryBuildingUtils" class="momime.common.utils.MemoryBuildingUtilsImpl" />
	
	<bean id="memoryCombatAreaEffectUtils" class="momime.common.utils.MemoryCombatAreaEffectUtilsImpl" />
	
	<bean id="memoryGridCellUtils" class="momime.common.utils.MemoryGridCellUtilsImpl" />
	
	<bean id="memoryMaintainedSpellUtils" class="momime.common.utils.MemoryMaintainedSpellUtilsImpl">
		<property name="spellUtils" ref="spellUtils" />
		<property name="unitUtils" ref="unitUtils" />
	</bean>
	
	<bean id="playerPickUtils" class="momime.common.utils.PlayerPickUtilsImpl" />
	
	<bean id="resourceValueUtils" class="momime.common.utils.ResourceValueUtilsImpl">
		<property name="playerPickUtils" ref="playerPickUtils" />
		<property name="skillCalculations" ref="skillCalculations" />
		<property name="spellCalculations" ref="spellCalculations" />
	</bean>
	
	<bean id="spellUtils" class="momime.common.utils.SpellUtilsImpl">
		<property name="playerPickUtils" ref="playerPickUtils" />
		<property name="spellCalculations" ref="spellCalculations" />
	</bean>
	
	<bean id="unitUtils" class="momime.common.utils.UnitUtilsImpl">
		<property name="playerPickUtils" ref="playerPickUtils" />
		<property name="memoryCombatAreaEffectUtils" ref="memoryCombatAreaEffectUtils" />
		<property name="multiplayerSessionUtils" ref="multiplayerSessionUtils" />
	</bean>
	
	<bean id="combatMapUtils" class="momime.common.utils.CombatMapUtilsImpl">
		<property name="multiplayerSessionUtils" ref="multiplayerSessionUtils" />
	</bean>

	<bean id="pendingMovementUtils" class="momime.common.utils.PendingMovementUtilsImpl" />

	<bean id="scheduledCombatUtils" class="momime.common.utils.ScheduledCombatUtilsImpl">
		<property name="multiplayerSessionUtils" ref="multiplayerSessionUtils" />
	</bean>

	<bean id="randomUtils" class="com.ndg.random.RandomUtilsImpl" />
	
	<bean id="coordinateSystemUtils" class="com.ndg.map.CoordinateSystemUtilsImpl" />
	
	<bean id="booleanMapAreaOperations3D" class="com.ndg.map.areas.operations.BooleanMapAreaOperations3DImpl">
		<property name="coordinateSystemUtils" ref="coordinateSystemUtils" />
	</bean>

</beans>